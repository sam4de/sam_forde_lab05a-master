#N canvas 361 125 852 784 10;
#X obj 460 695 * 6372.8;
#X floatatom 460 720 8 0 0 0 - - -;
#X floatatom 160 497 12 0 0 0 - - -;
#X obj -97 169 -;
#X obj 150 198 -;
#X floatatom -97 195 12 0 0 0 - - -;
#X floatatom 150 265 12 0 0 0 - - -;
#X obj -99 530 s lat1;
#X obj 104 536 s lat2;
#X obj -28 536 s long1;
#X obj 157 533 s long2;
#X obj 60 67 r lat1;
#X obj -31 67 r lat2;
#X obj 207 65 r long1;
#X obj 143 66 r long2;
#X obj 450 225 s a;
#X obj 460 668 r circDistR;
#X obj 403 316 sqrt;
#X obj 450 249 r a;
#X obj 460 742 s distance;
#X text 294 695 Radius of Earth in radians;
#X text 480 226 Equitorial Radius;
#X obj -85 448 unpack f f;
#X floatatom -91 487 5 0 0 0 - - -;
#X floatatom -26 490 5 0 0 0 - - -;
#X floatatom 99 483 5 0 0 0 - - -;
#X msg -86 411 52.6738 -8.57598;
#X msg 100 382 52.674 -8.57516;
#X msg 243 404 53.3589 -6.33414;
#X obj 450 385 atan2;
#X obj -10 104 * 3.14159;
#X obj -11 126 / 180;
#X floatatom -11 148 5 0 0 0 - - -;
#X obj 71 103 * 3.14159;
#X obj 70 125 / 180;
#X floatatom 70 147 5 0 0 0 - - -;
#X obj -94 219 * 3.14159;
#X obj -95 241 / 180;
#X floatatom -96 259 12 0 0 0 - - -;
#X obj 151 222 * 3.14159;
#X obj 150 244 / 180;
#X text -96 594 var R = 6.371e+06 \; // metres var Æ1 = lat1.toRadians()
\; var Æ2 = lat2.toRadians() \; var ”Æ = (lat2-lat1).toRadians() \;
var ”» = (lon2-lon1).toRadians() \; var a = Math.sin(”Æ/2) * Math.sin(”Æ/2)
+ Math.cos(Æ1) * Math.cos(Æ2) * Math.sin(”»/2) * Math.sin(”»/2) \;
var c = 2 * Math.atan2(Math.sqrt(a) \, Math.sqrt(1-a)) \; var d = R
* c \;;
#X obj 70 195 s phi1;
#X obj -2 211 s phi2;
#X obj -96 317 s delphi;
#X obj 149 322 s dellam;
#X obj 362 23 r delphi;
#X obj 362 45 * 0.5;
#X obj 362 66 sin;
#X obj 362 105 *;
#X obj 442 23 r phi1;
#X obj 442 46 cos;
#X obj 505 23 r phi2;
#X obj 505 45 cos;
#X obj 442 69 *;
#X obj 579 48 * 0.5;
#X obj 578 72 sin;
#X obj 361 85 t f f;
#X obj 579 113 *;
#X obj 578 93 t f f;
#X obj 451 108 *;
#X obj 361 134 +;
#X floatatom 362 182 12 0 0 0 - - -;
#X obj 483 319 expr sqrt(1-$f1);
#X obj 449 276 t f f;
#X obj 453 418 * 2;
#X floatatom 453 442 5 0 0 0 - - -;
#X text 501 442 c;
#X obj 453 468 * 6372.8;
#X obj 453 497 * 1000;
#X floatatom 451 531 12 0 0 0 - - -;
#X obj 579 24 r dellam;
#X text -93 339 http://www.movable-type.co.uk/scripts/latlong.html
;
#X obj -97 295 float;
#X obj -4 179 float;
#X obj 71 174 float;
#X obj 150 296 float;
#X obj 17 251 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144 -1
-1;
#X text -114 13 current position is lat2 \, lon2;
#X text 84 15 destination is lat1 \, lon1;
#X text -90 392 destination;
#X text 99 365 current position;
#X obj 17 272 t b b b b b b b_____;
#X obj 105 444 unpack f f;
#X obj -20 307 t b f;
#X obj 325 444 inlet;
#X obj 385 444 inlet;
#X obj 198 441 inlet;
#X obj 258 441 inlet;
#X obj 451 565 outlet;
#X connect 0 0 1 0;
#X connect 1 0 19 0;
#X connect 2 0 10 0;
#X connect 3 0 5 0;
#X connect 4 0 39 0;
#X connect 5 0 36 0;
#X connect 6 0 76 1;
#X connect 11 0 33 0;
#X connect 11 0 3 1;
#X connect 12 0 30 0;
#X connect 12 0 3 0;
#X connect 13 0 4 1;
#X connect 14 0 4 0;
#X connect 16 0 0 0;
#X connect 17 0 29 0;
#X connect 18 0 64 0;
#X connect 22 0 23 0;
#X connect 22 1 24 0;
#X connect 23 0 7 0;
#X connect 24 0 9 0;
#X connect 25 0 8 0;
#X connect 26 0 22 0;
#X connect 27 0 83 0;
#X connect 28 0 83 0;
#X connect 29 0 65 0;
#X connect 30 0 31 0;
#X connect 31 0 32 0;
#X connect 32 0 74 1;
#X connect 33 0 34 0;
#X connect 34 0 35 0;
#X connect 35 0 75 1;
#X connect 36 0 37 0;
#X connect 37 0 38 0;
#X connect 38 0 84 0;
#X connect 39 0 40 0;
#X connect 40 0 6 0;
#X connect 46 0 47 0;
#X connect 47 0 48 0;
#X connect 48 0 57 0;
#X connect 49 0 61 0;
#X connect 50 0 51 0;
#X connect 51 0 54 0;
#X connect 52 0 53 0;
#X connect 53 0 54 1;
#X connect 54 0 60 0;
#X connect 55 0 56 0;
#X connect 56 0 59 0;
#X connect 57 0 49 0;
#X connect 57 1 49 1;
#X connect 58 0 60 1;
#X connect 59 0 58 0;
#X connect 59 1 58 1;
#X connect 60 0 61 1;
#X connect 61 0 62 0;
#X connect 62 0 15 0;
#X connect 63 0 29 1;
#X connect 64 0 17 0;
#X connect 64 1 63 0;
#X connect 65 0 66 0;
#X connect 66 0 68 0;
#X connect 68 0 69 0;
#X connect 69 0 70 0;
#X connect 70 0 89 0;
#X connect 71 0 55 0;
#X connect 73 0 44 0;
#X connect 74 0 43 0;
#X connect 75 0 42 0;
#X connect 76 0 45 0;
#X connect 77 0 82 0;
#X connect 82 3 73 0;
#X connect 82 4 75 0;
#X connect 82 5 74 0;
#X connect 82 6 76 0;
#X connect 83 0 25 0;
#X connect 83 1 2 0;
#X connect 84 0 77 0;
#X connect 84 1 73 1;
#X connect 85 0 7 0;
#X connect 86 0 9 0;
#X connect 87 0 8 0;
#X connect 88 0 10 0;
